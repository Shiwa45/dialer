{% extends 'reports/base.html' %}

{% block page_title %}<i class="fas fa-filter text-primary"></i> Lead Dispositions{% endblock %}
{% block page_description %}Outcome distribution across selected period{% endblock %}
{% block export_links %}
  <a class="btn btn-sm btn-outline-primary" href="{% url 'reports:export' 'lead' 'csv' %}?{{ request.GET.urlencode }}"><i class="fas fa-file-csv"></i> CSV</a>
  <a class="btn btn-sm btn-outline-primary" href="{% url 'reports:export' 'lead' 'xlsx' %}?{{ request.GET.urlencode }}"><i class="fas fa-file-excel"></i> Excel</a>
  <a class="btn btn-sm btn-outline-primary" href="{% url 'reports:export' 'lead' 'pdf' %}?{{ request.GET.urlencode }}"><i class="fas fa-file-pdf"></i> PDF</a>
{% endblock %}

{% block reports_content %}
{% include 'reports/_filters.html' %}

<div class="row g-3">
  {% for r in rows %}
  <div class="col-md-6 col-lg-4">
    <div class="card card-report">
      <div class="card-body d-flex justify-content-between align-items-center">
        <div>
          <div class="fw-bold">{{ r.disposition__name|default:'None' }}</div>
          <div class="text-muted small">{{ r.disposition__category|default:'-' }}</div>
        </div>
        <span class="badge rounded-pill" style="background: {{ r.disposition__color|default:'#6c757d' }};">{{ r.count }}</span>
      </div>
    </div>
  </div>
  {% empty %}
  <div class="col-12"><div class="text-center text-muted">No disposition data</div></div>
  {% endfor %}
</div>

{% endblock %}

